<%= turbo_frame_tag "random_set_info" do %>
  <div class="card mt-3">
    <div class="card-header">
      <div class="d-flex">
        <div class="col-8 d-flex align-items-center">
          <i class="bi bi-journal">セット情報</i>
        </div>
        <div class="col-4 mt-auto d-flex justify-content-end">
          <% if params[:action] == "edit" || params[:action] == "update" %>
            <%= link_to "ランダマイザーへ", random_set_path(@random_set),
              class: "btn btn-primary",
              data: { turbo_frame: "random_set" }
            %>
          <% else %>
            <% if logged_in? %>
              <%= link_to "編集モードへ", edit_random_set_path(@random_set),
                class: "btn btn-primary",
                data: { turbo_frame: "random_set" } %>
            <% else %>
              <%= link_to "編集", login_path(@random_set),
                class: "btn btn-secondary",
                data: { turbo_frame: "modal" } 
              %>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
    <div class="card-body mt-3">
      <div class="row mt-auto">
        <% if params[:action] == "show" %>
          <div class="col">
            <p>セット名称：<%= @random_set.name %></p>
            <% if @random_set.dict.present? %>
              <div class="col">
                <p>セット説明：<%= @random_set.dict %></p>
              </div>
            <% end %>
            <%# ModおよびValiant用 %>
            <% if @random_set.parent.present? %>
              <div class="col">
                <%= link_to @parent_set.name, random_set_lottery_path(@parent_set), class: "btn btn-outline-secondary", data: { turbo_frame: "random_set" } %>
              </div>
            <% end %>
          </div>
        <% elsif params[:action] == "edit" || params[:action] == "update" %>
          <div class="col mb-3" id="random_set_edit_forms">
            <%= form_with model: @random_set do |f| %>
              <%= render "form_flash", object: f.object %>
              <div class="input-group mb-3">
                <%= f.label :name, class: "input-group-text" %>
                <%= f.text_field :name, class: "form-control" %>
              </div>
              <div class="input-group mb-3">
                <%= f.label :dict, class: "input-group-text" %>
                <%= f.text_area :dict, class: "form-control" %>
              </div>
              <%= f.hidden_field :password, value: cookies.encrypted[:password_token] %>

              <%= f.submit "更新", class: "btn btn-primary" %>
              <%= link_to "リセット", edit_random_set_path(@random_set),
                class: "btn btn-danger",
                data: { turbo_stream: "edit" }
              %>
            <% end %>
          </div>
        <% end %>
      </div>
      <div class="row mt-auto">
        <div class="col">
          <%= render "infomation" %>
        </div>
      </div>
    </div>
  </div>
<% end %>
